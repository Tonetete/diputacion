
<html xmlns="http://www.w3.org/1999/xhtml"
          xmlns:h="http://java.sun.com/jsf/html"
          xmlns:ui="http://java.sun.com/jsf/facelets"
          xmlns:p="http://primefaces.org/ui"
          xmlns:c="http://java.sun.com/jsp/jstl/core">
<h:head >
 <ui:include src="res/header.html"   />
</h:head>
 <h:body> 
   <ui:include src="res/header-menu.xhtml" xmlns:ui="http://java.sun.com/jsf/facelets"  />
     <!-- topbar ends -->      
       <div class="container-fluid">
            <div class="row-fluid">
				
                <!-- left menu starts -->
                <ui:include src="res/sidebar.xhtml"/>
                <!-- left menu ends -->
                <div id="content" class="span10">
			<!-- content starts -->		

			<div>
				<ul class="breadcrumb">
					<li>
						<a href="main.jsp">Principal</a> <span class="divider">/</span>
					</li>
					<li>
						<a href="usuarios.jsp">Usuarios</a>
					</li>
				</ul>
			</div>
			
			<div class="row-fluid sortable">		
				<div class="box span12">
					<div class="box-header well">
						<h2><i class="icon-user"></i> Gestión de Usuarios</h2>
						<div class="box-icon">
							<a href="#" class="btn btn-setting btn-round"><i class="icon-cog"></i></a>
							<a href="#" class="btn btn-minimize btn-round"><i class="icon-chevron-up"></i></a>
							<a href="#" class="btn btn-close btn-round"><i class="icon-remove"></i></a>
                                                        <a data-toggle='modal' href="#form-usuario" class="btn btn-primary insertar"><i class="icon3-user"></i> Crear Usuario</a>
						</div>
					</div>
					<div class="box-content">
                                            
						<table class="table table-striped table-bordered bootstrap-datatable datatable">
                                                    
						  <thead>
							  <tr>
								  <th>DNI</th>
								  <th>Contraseña</th>
								  <th>Nombre</th>
								  <th>Apellidos</th>
								  <th>Email</th>
								  <th>Diputación</th>
								  <th>Rol</th>								  
								  <th>Acciones</th>								  
							  </tr>
						  </thead>   
						  <tbody>
                                                      <c:forEach items="${usuariosBean.listaUsuarios}" var="usuario"> 
							 <tr>        
                                                           <td id='dni'>${usuario.getDni()}</td>
                                                           <td id='contrasena' class='center'>${usuario.getContrasena()}</td>                                                          
                                                           <td id='nombre' class='center'>${usuario.getNombre()}</td>
                                                           <td id='apellidos' class='center'>${usuario.getApellidos()}</td>
                                                           <td id='email' class='center'>${usuario.getEmail()}</td>
                                                           <td id='diputacion' class='center'>${usuario.getCodigoDip().getCiudad()}</td>
                                                           <td id='rol' class='center'>${usuario.getCodigoRol().getTipo()}</td>						
                                                           <td class='center'><a data-toggle='modal' href='#form-usuario' class='btn btn-success edit'><i class='icon3-edit icon-white'></i>Editar</a> <a data-toggle='modal' href='#form-borrar-usuario' class='btn btn-danger delete'><i class='icon3-trash icon-white'></i>Borrar</a></td>
							 </tr>
                                                      </c:forEach>
						  </tbody>
					  </table>
                                                  <!-- Bootstrap trigger to open modal -->
                                                  <div class="hide fade modal" id="form-usuario">
                                                        <div class="modal-header">
                                                          <button type="button" class="close" data-dismiss="modal">×</button>
                                                          <h3>Editar Datos</h3>
                                                        </div>

<!--                                                        <div class="modal-body">                                                          
                                                          <form class="form-horizontal well" id="form-contact-usuario" data-async data-target="#rating-modal" action="/usuarios" method="POST">
                                                            <fieldset>                                                              
                                                              <h4 id="dni-h4" style="display:none;">DNI: </h4><input name="dni" class="validate[required]" id="dni" type="text" style="display:none;"  />
                                                              <h4>Nombre: </h4><input name="nombre" class="validate[required]" id="nombre" type="text" />
                                                              <h4>Apellidos: </h4><input name="apellidos" class="validate[required]" id="apellidos" type="text" />
                                                              <h4>Contraseña: </h4><input name="contrasena" class="validate[required]" id="contrasena" type="text" />
                                                              <h4>Email: </h4><input name="email" id="email" class="validate[required,custom[email]]" type="text" />
                                                              <h4>Diputacion: </h4><select name="diputacion" id="diputacion">
                                                                  <% List<Diputacion> diputaciones = (List<Diputacion>)request.getAttribute("listaDiputaciones");
                                                                    for(int i=0;i<diputaciones.size();i++){                                                                        
                                                                        out.print("<option value='"+diputaciones.get(i).getCiudad()+"'>"+diputaciones.get(i).getCiudad()+"</value>");
                                                                    }   
                                                                  %>
                                                              </select>
                                                              <h4>Rol: </h4><select name="rol" id="rol">
                                                                  <% List<Roles> roles = (List<Roles>)request.getAttribute("listaRoles");
                                                                    for(int i=0;i<roles.size();i++){                                                                        
                                                                       out.print("<option value='"+roles.get(i).getTipo()+"'>"+roles.get(i).getTipo()+"</value>");
                                                                    }   
                                                                  %>
                                                              </select>                                                              
                                                            </fieldset>
                                                          </form>
                                                        </div>-->

                                                        <div class="modal-footer">
                                                          <a href="#" class="btn" data-dismiss="modal">Cancel</a>
                                                          <input href="#" class="btn btn-primary ok" type="submit" value="Ok"/>
                                                        </div>
                                                      </div>                                  
                
                                                    
                                                  <!-- end modal -->
                                                  <!-- Bootstrap trigger to open modal -->
                                                  <div class="hide fade modal" id="form-borrar-usuario">
                                                        <div class="modal-header">
                                                          <button type="button" class="close" data-dismiss="modal">×</button>
                                                          <h3>Borrar Datos</h3>
                                                        </div>

                                                        <div class="modal-body">
                                                            <p>Estás apunto de borrar el registro. ¿Desea seguir?</p>
                                                        </div>

                                                        <div class="modal-footer">
                                                          <a href="#" class="btn" data-dismiss="modal">Cancelar</a>
                                                          <a href="#" class="btn btn-primary delete-ok" type="submit">OK</a>
                                                        </div>
                                                      </div>  
                                                  <!-- end modal -->
                                                  
                                                  
					</div>
				</div><!--/span-->
			
			</div><!--/row-->
                    </div>
            </div>
         </div>
          <!-- footer -->
        <ui:include src="res/footer.xhtml"/>          
    </h:body>   
</html>
                        
                        
